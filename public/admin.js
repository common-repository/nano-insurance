const key="pk_live_DIG4zRFwdEwpFUVrM6uf10Xw",stripe=Stripe(key),elements=stripe.elements(),style={base:{color:"#32325d",lineHeight:"18px",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}},card=elements.create("card",{style:style});card.mount("#ni-card-element"),card.addEventListener("change",function(e){var t=document.getElementById("ni-card-errors");e.error?t.textContent=e.error.message:t.textContent=""});const form=document.getElementById("ni-payment-form");function stripeTokenHandler(e){const t=document.getElementById("ni-payment-form"),n=document.getElementById("nano-insurance-api-key").value;jQuery.post(t.action,{apiKey:n,token:e.id},function(e){data={action:"nano_insurance_subscribe",subscribed:"1"},jQuery.post(ajaxurl,data,function(e){location.reload()})}).fail(function(e,t){alert("Some error occurred - please try again.")})}form.addEventListener("submit",function(e){e.preventDefault(),form.querySelectorAll('input[name="stripeToken"]').forEach(e=>e.parentNode.removeChild(e)),stripe.createToken(card).then(function(e){e.error?document.getElementById("ni-card-errors").textContent=e.error.message:stripeTokenHandler(e.token)})});const settingsForm=document.getElementById("ni-settings-form"),saveBtn=document.getElementById("ni-save");function domainVerification(e){e.stopPropagation(),e.preventDefault();const t=document.getElementById("code").value,n=document.getElementById("api-key").value,a=document.getElementById("verification-message-error");jQuery.post(ajaxurl,{action:"nano_insurance_verify",verificationCode:t,apiKey:n},function(e){"1"==e?(a.innerHTML="You have successfully verified your domain.",a.style.color="#22c65b",document.getElementById("ni-settings-form").submit()):(a.innerHTML="2"==e?"Please enter API key and/or verification code.":"Some error occurred. Please try again later.",a.style.color="#ff3860")})}document.querySelectorAll("input").forEach(e=>{e.addEventListener("change",()=>{saveBtn.removeAttribute("disabled"),"nano_insurance_options[style]"===e.name&&settingsForm.setAttribute("data-style-type",e.value)})});const verifyBtn=document.getElementById("ni-verify");verifyBtn.addEventListener("click",domainVerification),saveBtn.addEventListener("click",()=>{const e=document.getElementById("ni-container").querySelector(".tabs ul li.is-active").getAttribute("data-tab");document.getElementById(`${e}`).submit()});const tabs=document.querySelectorAll(".tabs li");tabs.forEach(e=>{e.addEventListener("click",e=>{const t=e.target.parentNode;"ni-payment-form"===t.dataset.tab?saveBtn.style.display="none":saveBtn.style.display="inline-block",document.querySelector(".tabs .is-active").classList.remove("is-active"),t.classList.add("is-active"),document.querySelectorAll(".ni-tab").forEach(e=>e.style.display="none"),document.getElementById(t.dataset.tab).style.display="block"})});